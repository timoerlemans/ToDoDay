<div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-8">
  <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-3" id="form-title">New Task</h2>

  <form
    (ngSubmit)="onSubmit()"
    [formGroup]="taskForm"
    aria-labelledby="form-title"
    class="space-y-4"
    role="form"
  >
    <!-- Title -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300" for="title">
        Title
      </label>
      <input
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"
        formControlName="title"
        id="title"
        type="text"
      />
      @if (taskForm.get('title')?.invalid && taskForm.get('title')?.touched) {
        <p class="mt-1 text-sm text-red-600">
          {{ getErrorMessage('title') }}
        </p>
      }
    </div>

    <!-- Description -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300" for="description">
        Description
      </label>
      <textarea
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"
        formControlName="description"
        id="description"
        rows="3"
      ></textarea>
      @if (taskForm.get('description')?.invalid && taskForm.get('description')?.touched) {
        <p class="mt-1 text-sm text-red-600">
          {{ getErrorMessage('description') }}
        </p>
      }
    </div>

    <!-- Project -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300" for="project">
        Project
      </label>
      <input
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"
        formControlName="project"
        id="project"
        type="text"
      />
    </div>

    <!-- Priority -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300" for="priority">
        Priority
      </label>
      <select
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"
        formControlName="priority"
        id="priority"
      >
        <option [ngValue]="null">No priority</option>
        <option [value]="TaskPriority.LOW">Low</option>
        <option [value]="TaskPriority.MEDIUM">Medium</option>
        <option [value]="TaskPriority.HIGH">High</option>
      </select>
    </div>

    <!-- Due Date -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300" for="due_date">
        Deadline
      </label>
      <input
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"
        formControlName="due_date"
        id="due_date"
        type="date"
      />
    </div>

    <!-- Start Date -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300" for="start_date">
        Start Date
      </label>
      <input
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"
        formControlName="start_date"
        id="start_date"
        type="date"
      />
    </div>

    <!-- Notify At -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300" for="notify_at">
        Reminder
      </label>
      <input
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"
        formControlName="notify_at"
        id="notify_at"
        type="datetime-local"
      />
    </div>

    <!-- Labels -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300" for="labels">
        Labels (comma-separated)
      </label>
      <input
        [formControlName]="'labels'"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"
        id="labels"
        placeholder="project, urgent, review"
        type="text"
      />
    </div>

    <div class="flex justify-end">
      <button
        (click)="onSubmit()"
        class="inline-flex justify-center rounded-md border border-transparent bg-primary-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"
        type="submit"
      >
        Save
      </button>
    </div>
  </form>
</div>
